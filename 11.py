print((lambda a:("".join((lambda f,*x: f(f,*x))(lambda g, p, h, w: c if p == (c :=(lambda x: ["".join([(lambda c, o: "#" if c == "L" and o.count("#") == 0 else "L" if c == "#" and o.count("#") > 4 else c)(x[j][i], (lambda a, i, j: "".join([b[max(i-1,0):i+2] for b in a[max(j-1,0):j+2]]))(x,i,j)) for i in range(w)]) for j in range(h)])(p)) else g(g, c, h, w),a, len(a), len(a[0]))).count("#"),"".join((lambda f,*x: f(f,*x))(lambda g, p, h, w:c if p == (c :=(lambda x: ["".join([(lambda c, o: "#" if c == "L" and o.count("#") == 0 else "L" if c == "#" and o.count("#") > 4 else c)(x[j][i],"".join([(lambda k,*y: k(k,*y))(lambda t, a, i,j, c,s, h,w: "." if not (0 <= j+s < h and 0 <= i+c < w) else a[j+s][i+c] if a[j+s][i+c] != "." else t(t,a,i+c,j+s,c,s,h,w),p, i,j, c,s, h,w)for c in range(-1,2) for s in range(-1,2) if c != 0 or s != 0])) for i in range(w)]) for j in range(h)])(p)) else g(g, c, h, w),a, len(a), len(a[0]))).count("#")))(open("11").readlines()))