print((lambda D:((lambda f,*a:f(f,*a))(lambda f,d,r,i,a:a if i in r else f(f,d,r|{i}, (not'j'in d[i] or int(d[i][4:]))+i,('a'in d[i])*int(d[i][4:])+a),D,set(),0,0),max([(lambda f,*a:f(f,*a))(lambda f,d,r,i,a,s:-1 if i in r else a if i >= len(D) else f(f,d,r|{i}, ((not'j'in d[i] != i!=s)or int(d[i][4:]))+i,('a'in d[i])*int(d[i][4:])+a, x),D,set(),0,0,x) for x in range(len(D))])))([*open("8")]))